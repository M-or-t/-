# SQL
## 难点 exists、not exists
> 对于except、not in、not exists 的转换
[转换说明](https://www.bilibili.com/video/BV1Xh4y1r7q9/?spm_id_from=333.337.search-card.all.click&vd_source=9370f8227d10801bacf35ac40593eec5)  
> 相关子查询p136、ANYALL实现与子查询结果比较，与聚集函数的互相转换  
> 带exists的子查询  一些带exists、notexists的子查询不能用其他形式的子查询替换，所有in、比较、anyall都能用exits替代  
> 查询选修了全部课程的学生的姓名！！  
> 集合观点 UNION、INTERSECT、EXCEPT  　
> 派生表  指定别名，属性中有聚集函数所有列都取别名，否则可以不取别名  
> select语句的一般形式  
> 数据更新  
> 插入元组：
> insert into 表名 【属性列1、2。。】 values （值1、值2.。）
> 插入子查询结果：
> insert into 表名 【属性列1、2.。】 子查询结果表  （使用聚集函数的时候要指定属性列）
> 数据修改：
> update 单表 set 列 = xxx 【where xxx】（修改满足where条件的元组） 一次只能修改一个表
> 删除数据：
> delete from 单表 【where xx】 缺省删除所有元组  只可能违反参照完整性
> 空值处理  
> is null\is not null  
> primary key = not null + unique  
> eg：不及格、缺考
> 视图 ：
> create view 视图 （列1、列2。。） as 子查询返回 【with check option】  
> 必须指定视图的列名：1.聚集函数\表达式 2.多表连接的同名列 3.要用新名字  
> 行列子集视图  
> 删除视图：
> drop view 视图 【cascade|restrict】  
> 删除基表时，视图定义保留、视图失效  
> 如果是分组视图，查询时条件用having  
> 视图与派生表的区别  
> 更新视图：
> update view set xxx 【where xxx】  
> 一些视图是不可更新的  
> 


1.     
数据库的事务故障指的是什么，发生事务故障后，DBMS如何恢复数据库?

事务故障指某个事务在运行过程中由于种种原因未运行至正常终止点就夭折了。

恢复方法：撤销事务。即清除该事务对数据库的所有修改，使得这个事务像根本没有启动过一样。（需要从后到前撤销，最新完成的操作的更新影响要先消失。因此，需要从后到前扫描日志文件。）

2.     
数据库的系统故障指的是什么，发生系统故障后，DBMS如何恢复数据库?

系统故障是指造成系统停止运转的任何事件，使得系统需要重新启动。

恢复方法：①清除尚未完成的事务对数据库的所有修改，UNDM（撤销）所有未完成的事务（从后往前）。

②将缓冲区中已完成事务提交的结果写入数据库，REDO（重做）所有已提交的事务（从前往后）。

3.     
数据库的介质故障指的是什么，发生介质故障后，DBMS如何恢复数据库？

介质故障是指硬件故障使存储在硬盘上的数据丢失。（破坏性大于前两个故障）

恢复方法：①在新磁盘上，导入最新的数据库备份文件。

②根据日志文件，找出来从该最新备份后开始，到故障发生时，哪些事务已经完成。

REDO(重做)所有已提交的事务。（从前往后）。

4.     
数据库的事务故障和系统故障的恢复技术有何相同之处和不同之处？

相同点：都需要UNDO(撤销)所有未完成的事务（从前往后）。

不同点：系统故障需要对还没有写入到磁盘的已经完成的事务进行REDO(重做)。

5.     
数据库的介质故障和系统故障的恢复技术有何相同之处和不同之处？

①  介质故障需要用到数据库的备份，把备份文件导入到新的介质上。

②  两种故障都需要重做，但是重做的范围不一样。

③  系统故障需要对还没有写入到磁盘的已经完成的事务进行REDO(重做)。

③介质故障需要从上一次最新的备份开始到发生故障中间所有已经完成的事物进行REDO（重做）。
————————————————
总结大题：  
https://blog.csdn.net/qq_35756383/article/details/88652826


关于并发控制  
https://blog.csdn.net/wangpaiblog/article/details/122787733  
https://blog.csdn.net/wangpaiblog/article/details/122780648  



}